DROP TABLE Address CASCADE CONSTRAINTS;
DROP TABLE BOM CASCADE CONSTRAINTS;
DROP TABLE BOMPart CASCADE CONSTRAINTS;
DROP TABLE BOO CASCADE CONSTRAINTS;
DROP TABLE BOO_Operation CASCADE CONSTRAINTS;
DROP TABLE Client CASCADE CONSTRAINTS;
DROP TABLE ClientType CASCADE CONSTRAINTS;
DROP TABLE Country CASCADE CONSTRAINTS;
DROP TABLE Operation CASCADE CONSTRAINTS;
DROP TABLE OperationWorkstationTypes CASCADE CONSTRAINTS;
DROP TABLE "Order" CASCADE CONSTRAINTS;
DROP TABLE OrderProduct CASCADE CONSTRAINTS;
DROP TABLE Part CASCADE CONSTRAINTS;
DROP TABLE Product CASCADE CONSTRAINTS;
DROP TABLE ProductFamily CASCADE CONSTRAINTS;
DROP TABLE ProductionOrder CASCADE CONSTRAINTS;
DROP TABLE Workstations CASCADE CONSTRAINTS;
DROP TABLE WorkstationTypes CASCADE CONSTRAINTS;

CREATE TABLE Address (
  Address     VARCHAR2(255) NOT NULL, 
  ZIP         VARCHAR2(8) NOT NULL, 
  Town        VARCHAR2(255) NOT NULL, 
  CountryCode VARCHAR2(2) NOT NULL, 
  ClientNIF   VARCHAR2(15) NOT NULL, 
  PRIMARY KEY (Address, ZIP)
);

CREATE TABLE BOM (
  BOMID         VARCHAR2(3) NOT NULL, 
  ProductPartID VARCHAR2(50) NOT NULL, 
  PRIMARY KEY (BOMID)
);

CREATE TABLE BOMPart (
  Quantity NUMBER(10) NOT NULL, 
  PartID   VARCHAR2(50) NOT NULL, 
  BOMID    VARCHAR2(3) NOT NULL, 
  PRIMARY KEY (PartID, BOMID)
);

CREATE TABLE BOO (
  BOOID VARCHAR2(3) NOT NULL, 
  PFID  NUMBER(3) NOT NULL, 
  PRIMARY KEY (BOOID)
);


CREATE TABLE BOO_Operation (
  SeqNum NUMBER(10) NOT NULL, 
  OPID   NUMBER(10) NOT NULL, 
  BOOID  VARCHAR2(3) NOT NULL, 
  PRIMARY KEY (OPID, BOOID, SeqNum)
);



CREATE TABLE Client (
  NIF           VARCHAR2(15) NOT NULL, 
  Name          VARCHAR2(50) NOT NULL, 
  Email         VARCHAR2(255) NOT NULL, 
  Phone         NUMBER(10) NOT NULL, 
  IDClient      NUMBER(10) NOT NULL, 
  CID VARCHAR2(2) NOT NULL, 
  PRIMARY KEY (NIF)
);

CREATE TABLE ClientType (
  CID  VARCHAR2(2) NOT NULL, 
  Type VARCHAR2(50) NOT NULL, 
  PRIMARY KEY (CID)
);

CREATE TABLE Country (
  CountryCode VARCHAR2(2) NOT NULL, 
  Name        VARCHAR2(50) NOT NULL, 
  PRIMARY KEY (CountryCode)
);

CREATE TABLE Operation (
  OPID NUMBER(10) NOT NULL, 
  Name VARCHAR2(255) NOT NULL, 
  PRIMARY KEY (OPID)
);

CREATE TABLE OperationWorkstationTypes (
  WTID VARCHAR2(5) NOT NULL, 
  OPID NUMBER(10) NOT NULL, 
  PRIMARY KEY (WTID, OPID)
);

CREATE TABLE "Order" (
  OID          NUMBER(10) NOT NULL, 
  DateDelivery DATE NOT NULL, 
  DateOrder    DATE NOT NULL, 
  ClientNIF    VARCHAR2(15) NOT NULL, 
  PRIMARY KEY (OID)
);

CREATE TABLE OrderProduct (
  Quantity      NUMBER(10) NOT NULL, 
  OID           NUMBER(10) NOT NULL, 
  ProductPartID VARCHAR2(50) NOT NULL, 
  PRIMARY KEY (OID, ProductPartID)
);

CREATE TABLE Part (
  PartID      VARCHAR2(50) NOT NULL, 
  Description VARCHAR2(255) NOT NULL, 
  PRIMARY KEY (PartID)
);

CREATE TABLE Product (
  PartID VARCHAR2(50) NOT NULL, 
  Name   VARCHAR2(255) NOT NULL, 
  PFID   NUMBER(3) NOT NULL, 
  PRIMARY KEY (PartID)
);

CREATE TABLE ProductFamily (
  PFID NUMBER(3) NOT NULL, 
  Name VARCHAR2(50) NOT NULL, 
  PRIMARY KEY (PFID)
);

CREATE TABLE ProductionOrder (
  PrOrID VARCHAR2(10) NOT NULL, 
  OID    NUMBER(10) NOT NULL, 
  BOMID  VARCHAR2(3) NOT NULL, 
  BOOID  VARCHAR2(3) NOT NULL, 
  PRIMARY KEY (PrOrID)
);

CREATE TABLE Workstations (
  WSID        NUMBER(4) NOT NULL, 
  Name        VARCHAR2(50) NOT NULL, 
  Description VARCHAR2(255) NOT NULL, 
  WTID        VARCHAR2(5) NOT NULL, 
  PRIMARY KEY (WSID)
);

CREATE TABLE WorkstationTypes (
  WTID VARCHAR2(5) NOT NULL, 
  Name VARCHAR2(255) NOT NULL, 
  PRIMARY KEY (WTID)
);


ALTER TABLE BOM ADD CONSTRAINT FKBOM367104 FOREIGN KEY (ProductPartID) REFERENCES Product (PartID);
ALTER TABLE "Order" ADD CONSTRAINT FKOrder902671 FOREIGN KEY (ClientNIF) REFERENCES Client (NIF);
ALTER TABLE Client ADD CONSTRAINT FKClient256683 FOREIGN KEY (CID) REFERENCES ClientType (CID);
ALTER TABLE Product ADD CONSTRAINT FKProduct436806 FOREIGN KEY (PFID) REFERENCES ProductFamily (PFID);
ALTER TABLE BOO ADD CONSTRAINT FKBOO508277 FOREIGN KEY (PFID) REFERENCES ProductFamily (PFID);
ALTER TABLE Product ADD CONSTRAINT FKProduct188 FOREIGN KEY (PartID) REFERENCES Part (PartID);
ALTER TABLE OrderProduct ADD CONSTRAINT FKOrderProduct78362 FOREIGN KEY (OID) REFERENCES "Order" (OID);
ALTER TABLE OrderProduct ADD CONSTRAINT FKOrderProduct517650 FOREIGN KEY (ProductPartID) REFERENCES Product (PartID);
ALTER TABLE Address ADD CONSTRAINT FKAddress919413 FOREIGN KEY (CountryCode) REFERENCES Country (CountryCode);
ALTER TABLE Address ADD CONSTRAINT FKAddress947374 FOREIGN KEY (ClientNIF) REFERENCES Client (NIF);
ALTER TABLE Workstations ADD CONSTRAINT FKWorkstations577511 FOREIGN KEY (WTID) REFERENCES WorkstationTypes (WTID);
ALTER TABLE OperationWorkstationTypes ADD CONSTRAINT FKOperationWT385866 FOREIGN KEY (WTID) REFERENCES WorkstationTypes (WTID);
ALTER TABLE OperationWorkstationTypes ADD CONSTRAINT FKOperationWT638326 FOREIGN KEY (OPID) REFERENCES Operation (OPID);
ALTER TABLE BOO_Operation ADD CONSTRAINT FKBOOOperation703134 FOREIGN KEY (OPID) REFERENCES Operation (OPID);
ALTER TABLE BOO_Operation ADD CONSTRAINT FKBOOOperation2525 FOREIGN KEY (BOOID) REFERENCES BOO (BOOID);
ALTER TABLE BOMPart ADD CONSTRAINT FKBOMPart445966 FOREIGN KEY (PartID) REFERENCES Part (PartID);
ALTER TABLE BOMPart ADD CONSTRAINT FKBOMPart976002 FOREIGN KEY (BOMID) REFERENCES BOM (BOMID);
ALTER TABLE ProductionOrder ADD CONSTRAINT FKProductionOrder102944 FOREIGN KEY (OID) REFERENCES "Order" (OID);
ALTER TABLE ProductionOrder ADD CONSTRAINT FKProductionOrder770472 FOREIGN KEY (BOMID) REFERENCES BOM (BOMID);
ALTER TABLE ProductionOrder ADD CONSTRAINT FKProductionOrder774318 FOREIGN KEY (BOOID) REFERENCES BOO (BOOID);
