# USBD22: Database Insert Generators

## User Story

**As a Production Manager,**  
I want to populate the database with initial data for clients, parts, operations, procurement, and orders,  
So that the system can accurately reflect our current inventory and order processing capabilities.

---

**Como Gerente de Produção,**  
Quero popular o banco de dados com dados iniciais de clientes, peças, operações, compras e pedidos,  
Para que o sistema possa refletir com precisão nosso estoque atual e as capacidades de processamento de pedidos.

## Acceptance Criteria

1. **Automated Data Generation:** Python scripts are developed to parse XML datasets and generate corresponding SQL insert statements.
2. **Comprehensive Coverage:** All relevant tables (Clients, Parts, BOO, Operations, Procurement, Orders) are populated with accurate data.
3. **Error Handling:** Scripts include error handling to manage and report issues during data generation.
4. **Ease of Use:** A master script (`generate_all.py`) is provided to execute all individual data generation scripts sequentially.
5. **Documentation:** Clear instructions are provided to guide users through the data generation and insertion process.

## Overview

The USBD22 module is responsible for initializing the database with essential data required for production management. It leverages Python scripts to parse various XML datasets and generate SQL scripts that insert data into the database. This ensures that the system starts with a consistent and accurate state, facilitating reliable order processing and inventory management.

## Files

### Scripts

- **`generate_client_inserts.py`**
  - Parses `Dataset_S3_clients_V01.xml` to generate SQL inserts for Clients and Addresses.
- **`generate_basic_config_inserts.py`**
  - Generates SQL inserts for Product Families and Workstation Types based on predefined configurations.
- **`generate_parts_inserts.py`**
  - Parses `Dataset_S3_parts_V01.xml` to generate SQL inserts for Parts, ExternalParts, Components, RawMaterials, InternalParts, and Products.
- **`generate_boo_inserts.py`**
  - Parses `Dataset_S3_boo_V01.xml` to generate SQL inserts for BOO.
- **`generate_operations_inserts.py`**
  - Parses `Dataset_S3_operations_V02.xml` and `Dataset_S3_boo_V01.xml` to generate SQL inserts for Operations and BOO_Operations.
- **`generate_procurement_inserts.py`**
  - Parses `Dataset_S3_procurement_V02.xml` to generate SQL inserts for Suppliers and Offers.
- **`generate_orders_inserts.py`**
  - Parses `Dataset_S3_orders_VXX.xml` (assumed) to generate SQL inserts for Orders, OrderProducts, and ProductionOrders.
- **`generate_all.py`**
  - Master script that sequentially executes all individual data generation scripts to produce comprehensive SQL insert files.

### Datasets

- **`Dataset_S3_clients_V01.xml`**
  - Contains client information including ID, name, VAT number, email, phone, address, and country.
- **`Dataset_S3_parts_V01.xml`**
  - Contains parts information including part number, description, type, and related details.
- **`Dataset_S3_boo_V01.xml`**
  - Contains BOO (Bill of Operations) information linking parts and operations.
- **`Dataset_S3_procurement_V02.xml`**
  - Contains procurement information including suppliers, offers, part IDs, dates, quantities, and prices.
- **`Dataset_S3_operations_V02.xml`**
  - Contains operations information including operation types, descriptions, execution times, and workstation type associations.

### SQL Files

Generated by the Python scripts and located in the `sql` directory:

- **`01_client_inserts.sql`**
- **`02_basic_config_inserts.sql`**
- **`03_parts_inserts.sql`**
- **`04_boo_inserts.sql`**
- **`05_operations_inserts.sql`**
- **`06_procurement_inserts.sql`**
- **`07_orders_inserts.sql`**

## Usage

### Prerequisites

- **Python 3.x:** Ensure Python 3 is installed on your system.
- **XML Datasets:** The required XML datasets should be placed in the `datasets` directory.
- **Oracle Database:** An Oracle database instance where the SQL scripts will be executed.

### Steps

1. **Setup Environment:**
   - Clone the repository and navigate to the `plantFloorManager/Sprint3/USBD22/scripts` directory.
   
2. **Prepare Datasets:**
   - Ensure all XML datasets are correctly formatted and placed in the `datasets` folder.
   
3. **Generate SQL Inserts:**
   - Execute the master script to generate all SQL insert files:
     ```bash
     python generate_all.py
     ```
   - This will run all individual scripts and produce SQL files in the `sql` directory.

4. **Review Generated SQL:**
   - Navigate to the `sql` directory to review the generated SQL insert scripts.
   
5. **Execute SQL Scripts:**
   - Use an Oracle SQL client to execute the generated scripts in the following order to ensure data integrity:
     1. `01_client_inserts.sql`
     2. `02_basic_config_inserts.sql`
     3. `03_parts_inserts.sql`
     4. `04_boo_inserts.sql`
     5. `05_operations_inserts.sql`
     6. `06_procurement_inserts.sql`
     7. `07_orders_inserts.sql`
   
6. **Verify Data Insertion:**
   - After executing the scripts, verify that data has been correctly inserted into the respective tables by running sample SELECT queries.

## Testing

- **Comprehensive Tests:** Use the provided datasets to test the insertion scripts. Modify datasets as needed to simulate different scenarios.
- **Error Handling:** The scripts include error handling to rollback transactions in case of failures. Review any error messages to troubleshoot issues.
- **Data Integrity:** Ensure that foreign key constraints are maintained by executing scripts in the correct order.
  
## Conclusion

The USBD22 module streamlines the process of populating the database with essential data, ensuring that the system is ready for efficient order processing and inventory management. By automating data generation through Python scripts, it reduces manual errors and accelerates the setup process.

---

## USBD22: Geradores de Inserções de Banco de Dados

### História do Usuário

**Como Gerente de Produção,**  
Quero popular o banco de dados com dados iniciais de clientes, peças, operações, compras e pedidos,  
Para que o sistema possa refletir com precisão nosso estoque atual e as capacidades de processamento de pedidos.

### Critérios de Aceitação

1. **Geração Automática de Dados:** Scripts em Python são desenvolvidos para analisar conjuntos de dados XML e gerar as respectivas instruções SQL de inserção.
2. **Cobertura Abrangente:** Todas as tabelas relevantes (Clientes, Peças, BOO, Operações, Compras, Pedidos) são preenchidas com dados precisos.
3. **Tratamento de Erros:** Os scripts incluem tratamento de erros para gerenciar e relatar problemas durante a geração de dados.
4. **Facilidade de Uso:** Um script mestre (`generate_all.py`) é fornecido para executar todos os scripts individuais de geração de dados sequencialmente.
5. **Documentação:** Instruções claras são fornecidas para guiar os usuários através do processo de geração e inserção de dados.

### Visão Geral

O módulo USBD22 é responsável por inicializar o banco de dados com dados essenciais necessários para a gestão de produção. Ele utiliza scripts em Python para analisar vários conjuntos de dados XML e gerar scripts SQL que inserem dados no banco de dados. Isso garante que o sistema comece com um estado consistente e preciso, facilitando o processamento confiável de pedidos e a gestão de inventário.

### Arquivos

#### Scripts

- **`generate_client_inserts.py`**
  - Analisa `Dataset_S3_clients_V01.xml` para gerar inserções SQL para Clientes e Endereços.
- **`generate_basic_config_inserts.py`**
  - Gera inserções SQL para Famílias de Produtos e Tipos de Estações de Trabalho com base em configurações pré-definidas.
- **`generate_parts_inserts.py`**
  - Analisa `Dataset_S3_parts_V01.xml` para gerar inserções SQL para Peças, ExternalParts, Components, RawMaterials, InternalParts e Products.
- **`generate_boo_inserts.py`**
  - Analisa `Dataset_S3_boo_V01.xml` para gerar inserções SQL para BOO.
- **`generate_operations_inserts.py`**
  - Analisa `Dataset_S3_operations_V02.xml` e `Dataset_S3_boo_V01.xml` para gerar inserções SQL para Operações e BOO_Operations.
- **`generate_procurement_inserts.py`**
  - Analisa `Dataset_S3_procurement_V02.xml` para gerar inserções SQL para Fornecedores e Ofertas.
- **`generate_orders_inserts.py`**
  - Analisa `Dataset_S3_orders_VXX.xml` (assumido) para gerar inserções SQL para Pedidos, OrderProducts e ProductionOrders.
- **`generate_all.py`**
  - Script mestre que executa sequencialmente todos os scripts individuais de geração de dados para produzir scripts SQL de inserção abrangentes.

#### Conjuntos de Dados

- **`Dataset_S3_clients_V01.xml`**
  - Contém informações de clientes, incluindo ID, nome, número VAT, e-mail, telefone, endereço e país.
- **`Dataset_S3_parts_V01.xml`**
  - Contém informações de peças, incluindo número da peça, descrição, tipo e detalhes relacionados.
- **`Dataset_S3_boo_V01.xml`**
  - Contém informações de BOO (Bill of Operations) vinculando peças e operações.
- **`Dataset_S3_procurement_V02.xml`**
  - Contém informações de compras, incluindo fornecedores, ofertas, IDs de peças, datas, quantidades e preços.
- **`Dataset_S3_operations_V02.xml`**
  - Contém informações de operações, incluindo tipos de operações, descrições, tempos de execução e associações de tipos de estações de trabalho.

#### Arquivos SQL

Gerados pelos scripts Python e localizados no diretório `sql`:

- **`01_client_inserts.sql`**
- **`02_basic_config_inserts.sql`**
- **`03_parts_inserts.sql`**
- **`04_boo_inserts.sql`**
- **`05_operations_inserts.sql`**
- **`06_procurement_inserts.sql`**
- **`07_orders_inserts.sql`**

## Uso

### Pré-requisitos

- **Python 3.x:** Certifique-se de que o Python 3 está instalado no seu sistema.
- **Conjuntos de Dados XML:** Os conjuntos de dados XML necessários devem estar na pasta `datasets`.
- **Banco de Dados Oracle:** Uma instância de banco de dados Oracle onde os scripts SQL serão executados.

### Passos

1. **Configurar o Ambiente:**
   - Clone o repositório e navegue até o diretório `plantFloorManager/Sprint3/USBD22/scripts`.
   
2. **Preparar os Conjuntos de Dados:**
   - Certifique-se de que todos os conjuntos de dados XML estão formatados corretamente e colocados na pasta `datasets`.
   
3. **Gerar Inserções SQL:**
   - Execute o script mestre para gerar todos os arquivos SQL de inserção:
     ```bash
     python generate_all.py
     ```
   - Isso executará todos os scripts individuais e produzirá arquivos SQL na pasta `sql`.
   
4. **Revisar os SQL Gerados:**
   - Navegue até a pasta `sql` para revisar os scripts SQL de inserção gerados.
   
5. **Executar os Scripts SQL:**
   - Use um cliente SQL Oracle para executar os scripts gerados na seguinte ordem para garantir a integridade dos dados:
     1. `01_client_inserts.sql`
     2. `02_basic_config_inserts.sql`
     3. `03_parts_inserts.sql`
     4. `04_boo_inserts.sql`
     5. `05_operations_inserts.sql`
     6. `06_procurement_inserts.sql`
     7. `07_orders_inserts.sql`
   
6. **Verificar a Inserção de Dados:**
   - Após executar os scripts, verifique se os dados foram inseridos corretamente nas respectivas tabelas executando consultas SELECT de amostra.

## Testes

- **Testes Abrangentes:** Use os conjuntos de dados fornecidos para testar os scripts de inserção. Modifique os conjuntos de dados conforme necessário para simular diferentes cenários.
- **Tratamento de Erros:** Os scripts incluem tratamento de erros para reverter transações em caso de falhas. Revise quaisquer mensagens de erro para solucionar problemas.
- **Integridade dos Dados:** Garanta que as restrições de chave estrangeira sejam mantidas executando os scripts na ordem correta.
  
## Conclusão

O módulo USBD22 simplifica o processo de preenchimento do banco de dados com dados essenciais, garantindo que o sistema esteja pronto para um processamento eficiente de pedidos e gestão de inventário. Ao automatizar a geração de dados através de scripts Python, reduz-se os erros manuais e acelera-se o processo de configuração.
